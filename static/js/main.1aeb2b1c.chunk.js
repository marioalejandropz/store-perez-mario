(this["webpackJsonpstore-perez-mario"]=this["webpackJsonpstore-perez-mario"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,c){},function(e,t,c){},,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),r=c(7),a=c.n(r),i=c(2),o=c(0),l=Object(s.createContext)(),u=function(e){var t=e.children,c=Object(s.useState)([]),n=Object(i.a)(c,2),r=n[0],a=n[1],u=Object(s.useState)(""),j=Object(i.a)(u,2),d=j[0],b=j[1],p=Object(s.useState)(""),O=Object(i.a)(p,2),m=O[0],h=O[1],x=Object(s.useState)("Category"),g=Object(i.a)(x,2),f=g[0],v=g[1],N=Object(s.useState)("Price"),y=Object(i.a)(N,2),k=y[0],I=y[1],C=Object(s.useState)(1),w=Object(i.a)(C,2),P=w[0],S=w[1],B=Object(s.useState)(16),T=Object(i.a)(B,1)[0],J=Object(s.useState)(!1),D=Object(i.a)(J,2),F=D[0],A=D[1],G=Object(s.useState)(!1),L=Object(i.a)(G,2),Q=L[0],q=L[1],R=Object(s.useState)([]),U=Object(i.a)(R,2),E=U[0],z=U[1],H=r.points-7447930||"";return Object(o.jsx)(l.Provider,{value:{requestUser:r,setRequestUser:a,buyBtn:m,setBuyBtn:h,points:H,purchaseHistoryBtn:d,setPurchaseHistoryBtn:b,categoryFilter:f,setCategoryFilter:v,priceFilter:k,setPriceFilter:I,currentPage:P,setCurrentPage:S,postPerPage:T,inProgress:F,setInProgress:A,isDarkMode:Q,setIsDarkMode:q,redeemProduct:E,setRedeemProduct:z},children:t})},j=(c(13),c(14),c(3)),d=c.n(j),b=c(5),p=c(4),O=(c(18),c.p+"static/media/header-x2.cc65119a.png"),m=c.p+"static/media/aerolab-logo.0a8fb170.svg",h=c.p+"static/media/coin.b8bc711d.svg",x=c.p+"static/media/moon.eee837ef.svg",g=c.p+"static/media/sun.2479fc5a.svg",f=c.p+"static/media/success.08385652.svg",v=c.p+"static/media/error.d42ef678.svg";var N=function(){var e=Object(s.useContext)(l),t=e.points,c=e.setRequestUser,n=e.requestUser,r=e.isDarkMode,a=e.setIsDarkMode,u=e.redeemProduct,j=Object(s.useState)(!1),N=Object(i.a)(j,2),y=N[0],k=N[1],I=Object(s.useState)([]),C=Object(i.a)(I,2),w=C[0],P=C[1],S=Object(s.useState)(!1),B=Object(i.a)(S,2),T=B[0],J=B[1],D=Object(s.useState)(!1),F=Object(i.a)(D,2),A=F[0],G=F[1],L=Object(s.useState)(null),Q=Object(i.a)(L,2),q=Q[0],R=Q[1],U=function(e){function t(){return(t=Object(b.a)(d.a.mark((function t(){var c,s,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"},s=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",headers:c,body:JSON.stringify({amount:e})});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,t.next=5,s();case 5:if((n=t.sent).ok){t.next=8;break}throw Error("Error! Try again later");case 8:return t.next=10,n.json();case 10:r=t.sent,P(r),J(!1),G(!0),R(null),setTimeout((function(){G(!1)}),5e3),t.next=24;break;case 18:t.prev=18,t.t0=t.catch(2),R(t.t0.message),setTimeout((function(){R(null)}),7e3),J(!1),G(!1);case 24:case"end":return t.stop()}}),t,null,[[2,18]])})))).apply(this,arguments)}J(!0),function(){t.apply(this,arguments)}()};return Object(s.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,s,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"},s=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,s();case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,c(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c,w,u]),Object(o.jsxs)("header",{children:[Object(o.jsxs)("div",{className:"logo-username-container",children:[Object(o.jsxs)("div",{className:"logo-darkmode-container",children:[Object(o.jsx)("img",{className:"logo",src:m,alt:"Page logo, an orange kite"}),Object(o.jsx)("button",{className:"darkmode-container",onClick:function(){return a(!r)},children:Object(o.jsx)("img",{className:"darkmode-btn",src:r?g:x,alt:"Darkmode logo, a black moon when the page is light and a white sun when the page is dark"})})]}),Object(o.jsxs)("div",{className:"username-points-container",children:[Object(o.jsx)("div",{className:"username",children:n.name},n.id),Object(o.jsxs)("button",{className:"total-points-btn",onClick:function(){return k(!y)},children:[t,Object(o.jsx)("img",{className:"coin-icon",src:h,alt:"Yellow and circular coin"})]},Object(p.uniqueId)())]})]}),Object(o.jsxs)("div",{className:"add-points-header-container",children:[Object(o.jsxs)("div",{className:"".concat(y?"add-points-container":"hide-container"),children:[Object(o.jsxs)("button",{className:"points-btn",type:"button",onClick:function(){return U(1e3)},children:["Add 1000",Object(o.jsx)("img",{className:"coin-icon",src:h,alt:"Yellow and circular coin"})]}),Object(o.jsxs)("button",{className:"points-btn",type:"button",onClick:function(){return U(5e3)},children:["Add 5000",Object(o.jsx)("img",{className:"coin-icon",src:h,alt:"Yellow and circular coin"})]}),Object(o.jsxs)("button",{className:"points-btn",type:"button",onClick:function(){return U(7500)},children:["Add 7500",Object(o.jsx)("img",{className:"coin-icon",src:h,alt:"Yellow and circular coin"})]}),T&&Object(o.jsxs)("div",{className:"points-message-container",children:[Object(o.jsx)("p",{className:"points-message",children:"Processing request..."})," "]}),A&&Object(o.jsxs)("div",{className:"points-message-container",children:[Object(o.jsx)("p",{className:"points-message",children:"Success!"}),Object(o.jsx)("img",{className:"success-icon",src:f,alt:"Green check symbol"})]}),q&&Object(o.jsxs)("div",{className:"points-message-container",children:[Object(o.jsx)("div",{children:Object(o.jsx)("p",{className:"points-message-error",children:q})}),Object(o.jsx)("div",{children:Object(o.jsx)("img",{className:"error-icon",src:v,alt:"Red circle with an exclamation mark inside"})})]})]}),Object(o.jsxs)("div",{className:"h1-pic-container",children:[Object(o.jsx)("h1",{className:"title",children:"Electronics"}),Object(o.jsx)("img",{className:"header-pic",src:O,alt:"Blue headphones inside a blue banner background"})]})]})]})},y=(c(19),c(20),c.p+"static/media/arrow-left.e6eb9be1.svg"),k=c.p+"static/media/arrow-right.3306c112.svg";var I=function(e,t){var c=Object(s.useContext)(l).setInProgress,n=Object(s.useState)([]),r=Object(i.a)(n,2),a=r[0],o=r[1];return Object(s.useEffect)((function(){function t(){return(t=Object(b.a)(d.a.mark((function t(){var s,n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"},n=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{headers:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,t.next=5,n();case 5:return r=t.sent,t.next=8,r.json();case 8:a=t.sent,c(!1),o(a),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),c(!1),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))).apply(this,arguments)}c(!0),function(){t.apply(this,arguments)}()}),[o,e,t,c]),a},C=function(){for(var e=Object(s.useContext)(l),t=e.setBuyBtn,c=e.setCurrentPage,n=e.postPerPage,r=I("https://coding-challenge-api.aerolab.co/products"),a=function(e){c(e),t("")},i=[],u=1;u<=Math.ceil(r.length/n);u++)i.push(u);return Object(o.jsx)(o.Fragment,{children:i.map((function(e){return Object(o.jsx)("div",{className:"arrows-container",children:2===e?Object(o.jsx)("img",{onClick:function(){return a(e)},src:k,className:"arrow-right arrow",alt:"Arrow inside a circle pointing right"},e):Object(o.jsx)("img",{onClick:function(){return a(e)},src:y,className:"arrow-left arrow",alt:"Arrow inside a circle pointing left"},e)},Object(p.uniqueId)())}))})};var w=function(e){var t=e.availableProducts,c=e.indexOfLastPost,n=Object(s.useContext)(l),r=n.setPurchaseHistoryBtn,a=n.purchaseHistoryBtn,i=n.categoryFilter,u=n.setCategoryFilter,j=n.setPriceFilter,d=I("https://coding-challenge-api.aerolab.co/products");return Object(o.jsxs)("div",{className:"filters-container",children:[Object(o.jsx)("div",{className:"".concat(a?"hide-amount":""),children:"Category"!==i?Object(o.jsx)("div",{className:"amount-products text",children:Object(o.jsxs)("p",{children:[t.length," of ",t.length," products"]})}):Object(o.jsx)("div",{className:"amount-products",children:Object(o.jsxs)("p",{className:"amount-products",children:[c," of ",d.length," products"]})})}),Object(o.jsx)("div",{className:"vertical-line"}),Object(o.jsx)("p",{className:"sort-by",children:"Sort by:"}),Object(o.jsxs)("select",{className:"filter",value:i,onChange:function(e){return u(e.target.value)},children:[Object(o.jsx)("option",{value:"Category",children:"Category"}),Object(o.jsx)("option",{value:"Phones",children:"Phones"}),Object(o.jsx)("option",{value:"Gaming",children:"Gaming"}),Object(o.jsx)("option",{value:"Laptops",children:"Laptops"}),Object(o.jsx)("option",{value:"Cameras",children:"Cameras"}),Object(o.jsx)("option",{value:"Audio",children:"Audio"}),Object(o.jsx)("option",{value:"Monitors & TV",children:"Monitors & TV"}),Object(o.jsx)("option",{value:"Smart Home",children:"Smart Home"}),Object(o.jsx)("option",{value:"Drones",children:"Drones"}),Object(o.jsx)("option",{value:"Phone Accessories",children:"Phone Accessories"}),Object(o.jsx)("option",{value:"PC Accessories",children:"PC Accessories"}),Object(o.jsx)("option",{value:"Tablets & E-readers",children:"Tablets & E-readers"})]}),Object(o.jsxs)("select",{className:"filter",onChange:function(e){return j({sort:e.target.value})},children:[Object(o.jsx)("option",{value:"Price",children:"Price"}),Object(o.jsx)("option",{value:"Lowest price",children:"Lowest price"}),Object(o.jsx)("option",{value:"Highest price",children:"Highest price"})]}),Object(o.jsx)("div",{className:"vertical-line"}),a?Object(o.jsx)("button",{className:"purchase-history-btn filter",onClick:function(){return r(!a)},children:"Available Products"}):Object(o.jsx)("button",{className:"purchase-history-btn filter",onClick:function(){return r(!a)},children:"Purchase History"}),t.length<16||a?Object(o.jsx)(o.Fragment,{}):Object(o.jsx)(C,{})]})};c(21);var P=function(){var e=Object(s.useContext)(l),t=e.categoryFilter,c=e.priceFilter,n=e.redeemProduct,r=I("https://coding-challenge-api.aerolab.co/user/history",n).filter((function(e){return"Category"!==t?t===e.category:e})).sort((function(e,t){return"Highest price"===c.sort?t.cost-e.cost:"Lowest price"===c.sort?e.cost-t.cost:c})),a=new Date,i=new Date(a.setDate(a.getDate()-2)),u=r.filter((function(e){return new Date(e.createDate).getTime()>i}));return Object(o.jsx)("div",{className:"products-main-container",children:(u||[]).map((function(e){return Object(o.jsxs)("div",{className:"products-container",children:[Object(o.jsxs)("div",{className:"pic-icon-container",children:[Object(o.jsx)("img",{className:"product-pic",src:e.img.hdUrl,alt:"electronic device"},Object(p.uniqueId)()),Object(o.jsxs)("div",{className:"missing-coins-container",children:[Object(o.jsx)("p",{className:"coins-p-history",children:e.cost}),Object(o.jsx)("img",{className:"missing-coins-icon",src:h,alt:"Yellow and circular coin"})]})]}),Object(o.jsxs)("div",{className:"p-container",children:[Object(o.jsx)("p",{className:"product-category",children:e.category},Object(p.uniqueId)()),Object(o.jsx)("p",{className:"product-name",children:e.name},Object(p.uniqueId)())]})]},Object(p.uniqueId)())}))})},S=c.p+"static/media/buy-blue.c5c4f01c.svg",B=c.p+"static/media/buy-white.9b6e6567.svg";var T=function(e){var t=e.missingPoins,c=e.i,n=e.products,r=e.isPending,a=e.isCompleted,i=e.error,u=e.handleSubmit,j=Object(s.useContext)(l),d=j.buyBtn,b=j.setBuyBtn,O=j.points;return Object(o.jsxs)("div",{className:"".concat(d===c?"products-container-blue":"products-container"),children:[d!==c?Object(o.jsxs)("div",{className:"pic-icon-container",children:[Object(o.jsx)("img",{className:"product-pic",src:n.img.hdUrl,alt:"electronic device"},Object(p.uniqueId)()),n.cost<O?Object(o.jsx)("img",{className:"buy-icon",src:S,alt:"white shopping bag inside a circular blue background",onClick:function(){return b(c)}}):Object(o.jsxs)("div",{className:"missing-coins-container",children:[Object(o.jsxs)("p",{className:"missing-coins-p",children:["You need ",t]}),Object(o.jsx)("img",{className:"missing-coins-icon",src:h,alt:"Yellow and circular coin"})]})]}):Object(o.jsxs)("div",{className:"redeem-main-container",children:[Object(o.jsx)("img",{className:"product-pic",src:n.img.hdUrl,alt:"electronic device"},Object(p.uniqueId)()),Object(o.jsx)("img",{className:"buy-icon",src:B,alt:"Blue shopping bag inside a circular white background",onClick:function(){return b("")}}),Object(o.jsxs)("div",{className:"reedem-container",children:[Object(o.jsxs)("div",{className:"coins-amount-container",children:[Object(o.jsx)("p",{className:"coins-p",children:n.cost}),Object(o.jsx)("img",{className:"coins-icon",src:h,alt:"Yellow and circular coin"})]}),!r&&Object(o.jsx)("button",{className:"redeem-btn",type:"button",onClick:function(){return u(n._id)},children:"Redeem Now"}),r&&Object(o.jsx)("button",{className:"redeem-btn",children:"Processing request..."}),a&&Object(o.jsxs)("div",{className:"redeem-message-container",children:[Object(o.jsx)("p",{children:" Success! "}),Object(o.jsx)("img",{className:"message-icon",src:f,alt:"Green check symbol"})]}),i&&Object(o.jsxs)("div",{className:"redeem-error-container",children:[Object(o.jsxs)("p",{className:"error-p",children:[" ",i," "]}),Object(o.jsx)("img",{className:"message-icon",src:v,alt:"Red circle with an exclamation mark inside"})]})]})]}),Object(o.jsxs)("div",{className:"p-container",children:[Object(o.jsx)("p",{className:"product-category",children:n.category},Object(p.uniqueId)()),Object(o.jsx)("p",{className:"product-name",children:n.name},Object(p.uniqueId)())]})]},Object(p.uniqueId)())};var J=function(e){var t=e.availableProducts,c=Object(s.useContext)(l),n=c.points,r=c.purchaseHistoryBtn,a=c.inProgress,u=c.setRedeemProduct,j=Object(s.useState)(!1),O=Object(i.a)(j,2),m=O[0],h=O[1],x=Object(s.useState)(!1),g=Object(i.a)(x,2),f=g[0],v=g[1],N=Object(s.useState)(null),y=Object(i.a)(N,2),k=y[0],I=y[1],C=function(e){function t(){return(t=Object(b.a)(d.a.mark((function t(){var c,s,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"},s=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://coding-challenge-api.aerolab.co/redeem",{method:"POST",headers:c,body:JSON.stringify({productId:e})});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,t.next=5,s();case 5:if((n=t.sent).ok){t.next=8;break}throw Error("Error! Could not complete the request");case 8:return t.next=10,n.json();case 10:r=t.sent,u(r),h(!1),I(null),v(!0),setTimeout((function(){v(!1)}),5e3),t.next=24;break;case 18:t.prev=18,t.t0=t.catch(2),h(!1),I(t.t0.message),setTimeout((function(){I(null)}),7e3),v(!1);case 24:case"end":return t.stop()}}),t,null,[[2,18]])})))).apply(this,arguments)}h(!0),function(){t.apply(this,arguments)}()};return Object(o.jsxs)("div",{className:"purchaseHistory-container",children:[r?Object(o.jsx)(P,{}):Object(o.jsx)("div",{className:"products-main-container",children:(t||[]).map((function(e,t){var c=-1*(n-e.cost);return Object(o.jsx)(T,{missingPoins:c,i:t,products:e,isPending:m,isCompleted:f,error:k,handleSubmit:C},Object(p.uniqueId)())}))}),a&&Object(o.jsx)("div",{className:"loading"})]})};c(22);var D=function(e){var t=e.availableProducts,c=e.indexOfLastPost,n=Object(s.useContext)(l),r=n.categoryFilter,a=n.purchaseHistoryBtn,i=I("https://coding-challenge-api.aerolab.co/products");return Object(o.jsx)("footer",{children:Object(o.jsxs)("div",{className:"".concat(a?"hide-amount":"amount-container"),children:[Object(o.jsx)("div",{className:"amount-products-footer",children:"Category"!==r?Object(o.jsx)("div",{className:"amount-products",children:Object(o.jsxs)("p",{children:[t.length," of ",t.length," products"]})}):Object(o.jsx)("div",{className:"amount-products",children:Object(o.jsxs)("p",{children:[c," of ",i.length," products"]})})}),t.length<16?Object(o.jsx)(o.Fragment,{}):Object(o.jsx)(C,{})]})})};var F=function(){var e=Object(s.useContext)(l),t=e.categoryFilter,c=e.priceFilter,n=e.currentPage,r=e.postPerPage,a=e.isDarkMode,i=n*r,u=i-r,j=I("https://coding-challenge-api.aerolab.co/products").filter((function(e){return"Category"!==t?t===e.category:e})).sort((function(e,t){return"Highest price"===c.sort?t.cost-e.cost:"Lowest price"===c.sort?e.cost-t.cost:c})).slice(u,i);return Object(o.jsx)("main",{className:"App ".concat(a?"darkMode":"App"),children:Object(o.jsxs)("div",{className:"general-container",children:[Object(o.jsx)(N,{}),Object(o.jsx)(w,{availableProducts:j,indexOfLastPost:i}),Object(o.jsx)(J,{availableProducts:j}),Object(o.jsx)(D,{indexOfLastPost:i,availableProducts:j})]})})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,24)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),r(e),a(e)}))};a.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(u,{children:Object(o.jsx)(F,{})})}),document.getElementById("root")),A()}],[[23,1,2]]]);
//# sourceMappingURL=main.1aeb2b1c.chunk.js.map